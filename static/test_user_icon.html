<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test User Icon - lekha.ai</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .user-icon-test {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }
        .status {
            padding: 5px 10px;
            border-radius: 3px;
            font-weight: bold;
        }
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>User Icon Functionality Test</h1>
        
        <div class="test-section">
            <h3>User Icon Test</h3>
            <div class="user-icon-test">
                <div id="testUserIcon" style="width: 42px; height: 42px; border-radius: 50%; border: 2px solid #e9ecef; cursor: pointer; display: flex; align-items: center; justify-content: center; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <img src="https://i.ibb.co/615DoWp/user-icon.png" alt="User Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                </div>
                <div>
                    <p><strong>Click the user icon to test functionality</strong></p>
                    <p id="testStatus" class="status">Not tested yet</p>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h3>Login State Test</h3>
            <button onclick="testLogin()">Simulate Login</button>
            <button onclick="testLogout()">Simulate Logout</button>
            <p id="loginStatus">Current state: Not logged in</p>
        </div>
        
        <div class="test-section">
            <h3>Modal Test</h3>
            <button onclick="testModal()">Test Modal Directly</button>
            <p id="modalStatus">Modal not tested</p>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal-overlay">
        <div class="modal-content">
            <span class="close-btn" onclick="closeTestModal()">&times;</span>
            <div id="authFormContainer">
                <form id="loginForm" class="auth-form">
                    <h2>Login</h2>
                    <p class="form-message"></p>
                    <input type="email" name="email" placeholder="Email Address" required>
                    <input type="password" name="password" placeholder="Password" required>
                    <button type="submit" class="btn btn-primary">Login</button>
                    <p class="toggle-form">Don't have an account? <a href="#" id="showSignup">Sign Up</a></p>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Test user icon functionality
        const testUserIcon = document.getElementById('testUserIcon');
        const testStatus = document.getElementById('testStatus');
        const loginStatus = document.getElementById('loginStatus');
        const modalStatus = document.getElementById('modalStatus');
        const authModal = document.getElementById('authModal');

        testUserIcon.addEventListener('click', () => {
            console.log('Test user icon clicked');
            testStatus.textContent = 'Icon clicked successfully!';
            testStatus.className = 'status success';
            
            const userEmail = localStorage.getItem('userEmail');
            if (userEmail) {
                if (confirm(`Logged in as: ${userEmail}\n\nDo you want to log out?`)) {
                    localStorage.removeItem('userEmail');
                    updateLoginStatus();
                }
            } else {
                openTestModal();
            }
        });

        function testLogin() {
            localStorage.setItem('userEmail', 'test@lekha.ai');
            updateLoginStatus();
        }

        function testLogout() {
            localStorage.removeItem('userEmail');
            updateLoginStatus();
        }

        function updateLoginStatus() {
            const userEmail = localStorage.getItem('userEmail');
            loginStatus.textContent = userEmail ? `Current state: Logged in as ${userEmail}` : 'Current state: Not logged in';
        }

        function testModal() {
            openTestModal();
        }

        function openTestModal() {
            console.log('Opening test modal');
            if (authModal) {
                authModal.classList.add('show');
                modalStatus.textContent = 'Modal opened successfully!';
                modalStatus.style.color = 'green';
            } else {
                modalStatus.textContent = 'Modal not found!';
                modalStatus.style.color = 'red';
            }
        }

        function closeTestModal() {
            if (authModal) {
                authModal.classList.remove('show');
                modalStatus.textContent = 'Modal closed successfully!';
                modalStatus.style.color = 'blue';
            }
        }

        // Initialize
        updateLoginStatus();
    </script>
</body>
</html>